<html><head><link rel="import" href="../../bower_components/polymer/polymer-element.html"><link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html"><link rel="import" href="hn-item.html"><link rel="import" href="hn-comment-item.html"></head><body><dom-module id="hn-comments"><template><style>:host{display:block;padding:0 15px 0 15px;}.info{font-size:xx-small;}.item{margin:0 0 15px 0;}</style><h2>Comments</h2><div id="loading">Loading...</div><div id="comment"><div class="item"><div>[[item.title]]</div><div class="info">[[item.points]] points by [[item.user]] [[item.time_ago]] | [[item.comments_count]] comments</div></div><div id="item_content"></div><div class="comments"><dom-repeat items="[[item.comments]]" initial-count="30"><template><hn-comment-item comment="[[item]]"></hn-comment-item></template></dom-repeat></div></div><iron-ajax auto="" url="https://api.hackerwebapp.com/item/[[item_id]]" handle-as="json" on-response="_handleResponse" on-error="_handleError" debounce-duration="300"></iron-ajax></template><script>var HackerNewsComments=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_handleResponse',value:function(d){this.item=d.detail.response,this.$.comment.hidden=!1,this.$.item_content.hidden=!1,this.$.loading.hidden=!0,console.log(this.item),this.item.content&&(this.$.item_content.innerHTML=this.item.content)}},{key:'_itemIDChanged',value:function(){this.$.comment.hidden=!0,this.$.item_content.hidden=!0,this.$.loading.hidden=!1,this.$.loading.innerHTML='Loading...',this.$.item_content.innerHTML=''}},{key:'_handleError',value:function(d){console.log('ERROR'),console.log(d),this.$.loading.innerHTML='(Network ERROR)'}}],[{key:'is',get:function(){return'hn-comments'}},{key:'properties',get:function(){return{item_id:{type:Object,observer:'_itemIDChanged'}}}}]),b}(Polymer.Element);window.customElements.define(HackerNewsComments.is,HackerNewsComments);</script></dom-module></body></html>